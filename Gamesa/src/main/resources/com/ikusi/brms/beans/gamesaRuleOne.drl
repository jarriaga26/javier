package com.ikusi.brms.beans;


rule "test envio request"
    no-loop true
when 
    request : Request( getEvent().getName()== "Test_0_3_XXX" )
then
    System.out.println("regla evaluada ver 1.0:"+request.getEvent().getName());
    request.getResponse().setResultado("CREATE");
    request.getResponse().setTiempoEspera(2);

    update( request );
    
end 


rule "device en memoria" 
   no-loop true
when
    request : Request( event.name == "Test_0_3_XXX", $sysID:device.sysId)
    Request($sysID != null,inMemory == true, device.sysId == $sysID);
    
then 
    System.out.println("the device: "+request.getDevice().getSyssId() +" is already in memory... ");
    System.out.println("whit event: "+request.getEvent().getName());
    retract(request);
end

rule "device no en memoria" 
   no-loop true
when
    request : Request( event.name == "Test_0_3_XXX", inMemory == false)
then
    System.out.println("no esta en memoria:"+request.getInMemory());
    request.setInMemory(true);
    update(request);
    
end




